{
  "_meta": {
    "spec_version": "1.0.0",
    "canon_version": "1",
    "generated_at": "2026-01-31T00:00:00Z",
    "generator": "canonical-closeout (phase lock)"
  },
  "vectors": [
    {
      "name": "valid.ok_with_usage",
      "input": {
        "spec_version": "1.0.0",
        "canon_version": "1",
        "record_type": "model_call",
        "started_at_ms": 1769817600100,
        "ended_at_ms": 1769817600200,
        "trace": {
          "trace_id": "0123456789abcdef0123456789abcdef",
          "span_id": "4444444444444444",
          "span_kind": "child",
          "parent_span_id": "3333333333333333"
        },
        "producer": {
          "layer": "flow",
          "component": "flowversion"
        },
        "auth_context_envelope_sha256": "02711ccc70dde0e90587d5174c8b6e788bbeb080530765a1b641754679ca1702",
        "policy_decision_envelope_sha256": "bbea5793c8983e4ecb6da304d200ac3af93cca355f07f03f465ecbf0310a1ef9",
        "model": {
          "provider": "openai",
          "model": "gpt-5.2-pro"
        },
        "request": {
          "content_type": "application/json",
          "sha256": "cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",
          "size_bytes": 123
        },
        "response": {
          "content_type": "application/json",
          "sha256": "dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd",
          "size_bytes": 456
        },
        "outcome": {
          "status": "ok"
        },
        "usage": {
          "input_tokens": 10,
          "output_tokens": 20,
          "total_tokens": 30
        }
      },
      "canonical_json": "{\"auth_context_envelope_sha256\":\"02711ccc70dde0e90587d5174c8b6e788bbeb080530765a1b641754679ca1702\",\"canon_version\":\"1\",\"ended_at_ms\":1769817600200,\"model\":{\"model\":\"gpt-5.2-pro\",\"provider\":\"openai\"},\"outcome\":{\"status\":\"ok\"},\"policy_decision_envelope_sha256\":\"bbea5793c8983e4ecb6da304d200ac3af93cca355f07f03f465ecbf0310a1ef9\",\"producer\":{\"component\":\"flowversion\",\"layer\":\"flow\"},\"record_type\":\"model_call\",\"request\":{\"content_type\":\"application/json\",\"sha256\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"size_bytes\":123},\"response\":{\"content_type\":\"application/json\",\"sha256\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\",\"size_bytes\":456},\"spec_version\":\"1.0.0\",\"started_at_ms\":1769817600100,\"trace\":{\"parent_span_id\":\"3333333333333333\",\"span_id\":\"4444444444444444\",\"span_kind\":\"child\",\"trace_id\":\"0123456789abcdef0123456789abcdef\"},\"usage\":{\"input_tokens\":10,\"output_tokens\":20,\"total_tokens\":30}}",
      "sha256": "91743a03641dbddd45da45abdccfbc960a6267c373244a5428155b76c56790f5"
    },
    {
      "name": "valid.ok_without_usage",
      "input": {
        "spec_version": "1.0.0",
        "canon_version": "1",
        "record_type": "model_call",
        "started_at_ms": 1769817600100,
        "ended_at_ms": 1769817600200,
        "trace": {
          "trace_id": "0123456789abcdef0123456789abcdef",
          "span_id": "4444444444444444",
          "span_kind": "child",
          "parent_span_id": "3333333333333333"
        },
        "producer": {
          "layer": "flow",
          "component": "flowversion"
        },
        "auth_context_envelope_sha256": "02711ccc70dde0e90587d5174c8b6e788bbeb080530765a1b641754679ca1702",
        "policy_decision_envelope_sha256": "bbea5793c8983e4ecb6da304d200ac3af93cca355f07f03f465ecbf0310a1ef9",
        "model": {
          "provider": "openai",
          "model": "gpt-5.2-pro"
        },
        "request": {
          "content_type": "application/json",
          "sha256": "cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",
          "size_bytes": 123
        },
        "response": {
          "content_type": "application/json",
          "sha256": "dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd",
          "size_bytes": 456
        },
        "outcome": {
          "status": "ok"
        }
      },
      "canonical_json": "{\"auth_context_envelope_sha256\":\"02711ccc70dde0e90587d5174c8b6e788bbeb080530765a1b641754679ca1702\",\"canon_version\":\"1\",\"ended_at_ms\":1769817600200,\"model\":{\"model\":\"gpt-5.2-pro\",\"provider\":\"openai\"},\"outcome\":{\"status\":\"ok\"},\"policy_decision_envelope_sha256\":\"bbea5793c8983e4ecb6da304d200ac3af93cca355f07f03f465ecbf0310a1ef9\",\"producer\":{\"component\":\"flowversion\",\"layer\":\"flow\"},\"record_type\":\"model_call\",\"request\":{\"content_type\":\"application/json\",\"sha256\":\"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\",\"size_bytes\":123},\"response\":{\"content_type\":\"application/json\",\"sha256\":\"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\",\"size_bytes\":456},\"spec_version\":\"1.0.0\",\"started_at_ms\":1769817600100,\"trace\":{\"parent_span_id\":\"3333333333333333\",\"span_id\":\"4444444444444444\",\"span_kind\":\"child\",\"trace_id\":\"0123456789abcdef0123456789abcdef\"}}",
      "sha256": "7a21130ea81edbff720438320f1cbe117e292724803e4880a29c1b4a97526594"
    },
    {
      "name": "invalid.missing_policy_decision_hash",
      "input": {
        "spec_version": "1.0.0",
        "canon_version": "1",
        "record_type": "model_call",
        "started_at_ms": 1769817600100,
        "ended_at_ms": 1769817600200,
        "trace": {
          "trace_id": "0123456789abcdef0123456789abcdef",
          "span_id": "4444444444444444",
          "span_kind": "child",
          "parent_span_id": "3333333333333333"
        },
        "producer": {
          "layer": "flow",
          "component": "flowversion"
        },
        "auth_context_envelope_sha256": "02711ccc70dde0e90587d5174c8b6e788bbeb080530765a1b641754679ca1702",
        "model": {
          "provider": "openai",
          "model": "gpt-5.2-pro"
        },
        "request": {
          "content_type": "application/json",
          "sha256": "cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",
          "size_bytes": 123
        },
        "response": {
          "content_type": "application/json",
          "sha256": "dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd",
          "size_bytes": 456
        },
        "outcome": {
          "status": "ok"
        },
        "usage": {
          "input_tokens": 10,
          "output_tokens": 20,
          "total_tokens": 30
        }
      },
      "canonical_json": null,
      "sha256": null
    },
    {
      "name": "invalid.started_at_float",
      "input": {
        "spec_version": "1.0.0",
        "canon_version": "1",
        "record_type": "model_call",
        "started_at_ms": 1769817600100.5,
        "ended_at_ms": 1769817600200,
        "trace": {
          "trace_id": "0123456789abcdef0123456789abcdef",
          "span_id": "4444444444444444",
          "span_kind": "child",
          "parent_span_id": "3333333333333333"
        },
        "producer": {
          "layer": "flow",
          "component": "flowversion"
        },
        "auth_context_envelope_sha256": "02711ccc70dde0e90587d5174c8b6e788bbeb080530765a1b641754679ca1702",
        "policy_decision_envelope_sha256": "bbea5793c8983e4ecb6da304d200ac3af93cca355f07f03f465ecbf0310a1ef9",
        "model": {
          "provider": "openai",
          "model": "gpt-5.2-pro"
        },
        "request": {
          "content_type": "application/json",
          "sha256": "cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",
          "size_bytes": 123
        },
        "response": {
          "content_type": "application/json",
          "sha256": "dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd",
          "size_bytes": 456
        },
        "outcome": {
          "status": "ok"
        },
        "usage": {
          "input_tokens": 10,
          "output_tokens": 20,
          "total_tokens": 30
        }
      },
      "canonical_json": null,
      "sha256": null
    },
    {
      "name": "invalid.producer_layer_wrong",
      "input": {
        "spec_version": "1.0.0",
        "canon_version": "1",
        "record_type": "model_call",
        "started_at_ms": 1769817600100,
        "ended_at_ms": 1769817600200,
        "trace": {
          "trace_id": "0123456789abcdef0123456789abcdef",
          "span_id": "4444444444444444",
          "span_kind": "child",
          "parent_span_id": "3333333333333333"
        },
        "producer": {
          "layer": "adapter",
          "component": "flowversion"
        },
        "auth_context_envelope_sha256": "02711ccc70dde0e90587d5174c8b6e788bbeb080530765a1b641754679ca1702",
        "policy_decision_envelope_sha256": "bbea5793c8983e4ecb6da304d200ac3af93cca355f07f03f465ecbf0310a1ef9",
        "model": {
          "provider": "openai",
          "model": "gpt-5.2-pro"
        },
        "request": {
          "content_type": "application/json",
          "sha256": "cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",
          "size_bytes": 123
        },
        "response": {
          "content_type": "application/json",
          "sha256": "dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd",
          "size_bytes": 456
        },
        "outcome": {
          "status": "ok"
        },
        "usage": {
          "input_tokens": 10,
          "output_tokens": 20,
          "total_tokens": 30
        }
      },
      "canonical_json": null,
      "sha256": null
    },
    {
      "name": "invalid.request_blob_missing_sha256",
      "input": {
        "spec_version": "1.0.0",
        "canon_version": "1",
        "record_type": "model_call",
        "started_at_ms": 1769817600100,
        "ended_at_ms": 1769817600200,
        "trace": {
          "trace_id": "0123456789abcdef0123456789abcdef",
          "span_id": "4444444444444444",
          "span_kind": "child",
          "parent_span_id": "3333333333333333"
        },
        "producer": {
          "layer": "flow",
          "component": "flowversion"
        },
        "auth_context_envelope_sha256": "02711ccc70dde0e90587d5174c8b6e788bbeb080530765a1b641754679ca1702",
        "policy_decision_envelope_sha256": "bbea5793c8983e4ecb6da304d200ac3af93cca355f07f03f465ecbf0310a1ef9",
        "model": {
          "provider": "openai",
          "model": "gpt-5.2-pro"
        },
        "request": {
          "content_type": "application/json",
          "sha256": null,
          "size_bytes": 123
        },
        "response": {
          "content_type": "application/json",
          "sha256": "dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd",
          "size_bytes": 456
        },
        "outcome": {
          "status": "ok"
        },
        "usage": {
          "input_tokens": 10,
          "output_tokens": 20,
          "total_tokens": 30
        }
      },
      "canonical_json": null,
      "sha256": null
    }
  ]
}
